# txstack

> Personal tech stack showcase â€” a static site cataloging every tool, app, and service used for development and productivity.

**Stack**: Handlebars + custom Node.js build + TinaCMS (Tina Cloud) + Netlify
**Author**: Anthony (Moana)

---

## Project Overview

txstack is a single-page static site that displays 47+ tools across 8 categories (System & Utilities, Development, Productivity, Communication, Creative & Media, Security, Specialized Tools, AI & Automation). Each tool is a markdown file with YAML frontmatter. A custom `build.js` script reads the markdown, compiles Handlebars templates, and outputs static HTML to `public/`.

**CMS**: TinaCMS via Tina Cloud â€” visual editing at app.tina.io. Replaced Decap CMS entirely.
**Hosting**: Netlify (primary), GitHub Pages (alt).

---

## Project Structure

```
content/tools/<category>/*.md â†’ Tool entries organized by category subfolder
content/categories.json   â†’ 8 categories with icons and subcategories
content/catalog.json      â†’ Auto-generated tool index (built by build.js)
content/scan-report.json  â†’ Latest app scan results (built by scan-apps.js)
content/settings.json     â†’ Site title, author, theme preference
templates/index.hbs       â†’ Main page layout (Handlebars)
templates/partials/       â†’ Reusable components (tool-card.hbs)
src/styles/               â†’ main.css (layout) + themes.css (color schemes)
src/scripts/              â†’ theme.js, search.js, filter.js, modal.js
scripts/scan-apps.js      â†’ Mac app scanner and tool generator
scripts/fetch-icons.js    â†’ Icon URL fetcher from macosicons.com
scripts/import-apps.js    â†’ Legacy initial seed script (static list)
tina/                     â†’ TinaCMS config (Tina Cloud mode)
tina/__generated__/       â†’ Auto-generated by tinacms build (DO NOT edit manually)
build.js                  â†’ Custom static site generator
dev-server.js             â†’ Express + Chokidar dev server (port 3000)
public/                   â†’ Build output (deployed to Netlify)
```

---

## Development Commands

```bash
# Local development (bypasses TinaCMS native module issue)
node build.js && node dev-server.js

# Full dev with TinaCMS admin (only works outside Dropbox path)
npm run dev

# Production build (used by Netlify)
npm run build    # â†’ node build.js && tinacms build

# Initialize sample content
npm run init-content

# Scan Mac for installed apps (report only)
node scripts/scan-apps.js

# Generate tool files for new apps (pre-filled metadata, display: false)
node scripts/scan-apps.js --generate

# Show tools added since a date
node scripts/scan-apps.js --recent 2026-02-26

# Show catalog tools not found on this Mac
node scripts/scan-apps.js --missing
```

---

## Known Constraints

### Dropbox path breaks native modules
This project lives at `~/Dropbox (Personal)/DEV/txstack`. The parentheses in the path cause `better-sqlite3` (a TinaCMS dependency) to fail during native module compilation. **Workaround**: Run `node build.js && node dev-server.js` directly for local dev, skipping `tinacms dev`. Or use a symlink from outside Dropbox to run `tinacms dev` when you need to regenerate `tina-lock.json`.

### TinaCMS lock file
`tina-lock.json` is the schema contract with Tina Cloud. Only `tinacms dev` regenerates it â€” `tinacms build` does NOT. If you change `tina/config.ts`, you must run `tinacms dev` to regenerate the lock file before pushing.

### Netlify secrets scanner
`tinacms build` embeds `TINA_TOKEN` into generated client code. This is by design (read-only content token), but Netlify's scanner flags it. May need to dismiss in Netlify dashboard.

### Tina Cloud schema validation
The `tina-lock.json` must stay in sync with `tina/config.ts`. If schema checks fail during build, regenerate the lock file with `tinacms dev` (not `tinacms build`).

---

## Key Configuration

| Item | Location |
|------|----------|
| TinaCMS config | `tina/config.ts` |
| Netlify config | `netlify.toml` |
| Site settings | `content/settings.json` |
| Categories | `content/categories.json` |
| Catalog index | `content/catalog.json` (auto-generated by build) |
| Scan report | `content/scan-report.json` (auto-generated by scan) |
| Git remote | SSH (`git@github.com`) |
| Env vars (Netlify) | `TINA_CLIENT_ID`, `TINA_TOKEN`, `TINA_SEARCH_TOKEN` |

---

## Coding Standards

- **Vanilla JS** â€” no frameworks. Search, filter, modal, and theme are hand-written ES6
- **No TypeScript** in runtime code (TinaCMS config is the exception)
- **Handlebars** for templating â€” logic-less, partials-based
- **CSS custom properties** for theming (light/dark/auto)
- **CommonJS** in build scripts (`require`), ES6 in browser scripts
- **Node 18** â€” pinned in `.nvmrc` and `netlify.toml`

---

## Code Quality (Biome)

This project uses [Biome](https://biomejs.dev/) for linting and formatting. Configuration is in `biome.json`.

```bash
# Check for issues
npx @biomejs/biome check .

# Auto-fix all issues
npx @biomejs/biome check . --write

# Or via npm scripts
npm run lint           # Check only
npm run lint:fix       # Auto-fix
```

### Key rules
- Single quotes, 2-space indent, 120 char line width, semicolons
- Unused variables and imports are warnings (not errors)
- `console.log` is allowed (build scripts rely on it)
- CSS linting enabled

### Excluded from linting
- `tina/__generated__/` â€” auto-generated by TinaCMS, never edit
- `tina-lock.json` â€” generated lock file
- `dist/`, `public/` â€” build output
- `package-lock.json`

---

## Git Conventions

- **Commit messages**: Be specific and concise, focus on "why" not "what"
- **Remote**: SSH (`git@github.com`)
- **Branch**: `main` is production â€” Netlify auto-deploys on push
- **Never commit**: `.env` files, tokens, `tina/__generated__/client.ts` with real values

---

## Deployment

Netlify auto-deploys when you push to `main`:
1. Netlify runs `BUILD_DIR=dist node build.js && tinacms build` (from `netlify.toml`)
2. Output goes to `dist/`
3. Secrets scanner may flag `TINA_TOKEN` in generated files â€” this is expected and can be dismissed

Manual deploy: `npm run build` locally, then push

---

## Content Schema (Tool Frontmatter)

Each tool markdown file in `content/tools/<category>/` has these fields:

```yaml
name: "Tool Name"
category: "development"          # One of 8 categories
subcategory: "IDE"               # Free-text subcategory
icon: "https://s3.macosicons.com/..."  # macOS icon CDN URL (from macosicons.com)
url: "https://example.com"       # Tool website
tags: ["tag1", "tag2"]           # Searchable tags
status: "active"                 # active | retired
featured: true                   # Show in featured section
devices: ["mac", "iphone"]      # Device availability
display: true                    # Show on site
previouslyUsed: false            # Moved to "Previously Used" section
replacedBy: ""                   # If retired, what replaced it
notes: "Usage notes"             # Personal notes (textarea)
startedUsing: "2020"             # Year you started using this tool
dateAdded: "2026-02-26"          # When added to txstack (auto-set by scanner)
```

---

## Catalog & App Scanner

### catalog.json (Auto-generated)

`content/catalog.json` is regenerated on every `build.js` run. It contains all tool metadata in a single file â€” use it for quick lookups instead of reading individual markdown files. Includes: name, slug, category, subcategory, status, devices, tags, display, url, description, startedUsing, dateAdded.

### scan-apps.js (App Scanner)

Scans `/Applications`, `/Applications/Setapp`, and `~/Applications` for installed `.app` bundles. Compares against `catalog.json` to find new and missing apps.

**Workflow:**
1. `node scripts/scan-apps.js` â€” scan and review (no files created), saves `content/scan-report.json`
2. `node scripts/scan-apps.js --generate` â€” create `.md` files with pre-filled metadata (category, description, URL, tags). Files are placed in the correct category folder with `display: false` and `dateAdded` set to today.
3. Review in TinaCMS â€” tweak metadata, set `startedUsing`, flip `display: true`

**Query flags:**
- `--recent [YYYY-MM-DD]` â€” show tools with dateAdded (optionally filtered by date)
- `--missing` â€” show catalog tools not found on this Mac

**Pre-filled metadata:** The scanner has a built-in `APP_INFO` lookup for known apps. Apps with known metadata get category, subcategory, description, URL, and tags auto-populated. Setapp apps are automatically tagged with `"setapp"`.

**scan-report.json:** Persisted after every scan. Contains new apps, missing apps, counts, and timestamps. Can be read by Claude Code or referenced anytime without re-scanning.

---

## ðŸ”´ Session Tracking (_WORKING.md)

**AI AGENTS: You MUST maintain `_WORKING.md` in the project root.**

### At the START of every session:
1. Read `_WORKING.md` to understand previous work, decisions, and open TODOs
2. Note the current status and any unresolved issues

### At the END of every session:
1. Add a new session entry to the **Session Log** section at the bottom
2. Update the **Current Status** section if anything changed
3. Update the **TODO** section â€” check off completed items, add new ones

### Session Entry Format

```markdown
### YYYY-MM-DD â€” Session N: Brief Title

**Summary**: 1-2 sentences describing what was accomplished.

**Challenges & Solutions**:
- **Problem description** â€” what went wrong or was difficult
  - **Solution**: How it was resolved

**Key Decisions**:
- Decision made and why

**Learnings**:
- Something discovered that's useful for future sessions
```

### What to Track
- What was accomplished (be specific â€” file names, commands run)
- Problems encountered and how they were solved
- Decisions made and the reasoning
- Anything learned that would help in the next session
- Files modified

### What NOT to Track
- Generic descriptions ("worked on the project")
- AI conversation meta-commentary
- Permission prompts or tool mechanics

### Top-Level Sections to Maintain

The `_WORKING.md` has these persistent sections that should be updated as things change:

| Section | Update When |
|---------|-------------|
| **Challenges & Solutions** | New issues discovered or resolved |
| **Key Decisions** | Architecture or approach decisions made |
| **Learnings** | New insights worth preserving |
| **Current Status** | Project state changes |
| **TODO** | Items completed or new items identified |
| **Session Log** | Every session (append new entries at bottom) |

---

## Security

- **Never commit `.env` files** â€” secrets managed via 1Password/environment
- **Never commit `tina/__generated__/client.ts` with real tokens** â€” `tinacms build` regenerates it
- Netlify env vars: `TINA_CLIENT_ID`, `TINA_TOKEN`, `TINA_SEARCH_TOKEN` (set in dashboard, not code)

---

*This project is part of Anthony's personal development ecosystem. Session continuity is maintained through `_WORKING.md`.*
